switch allow_half_if;

Do
  ::= "do" ";" as DoStat
  ;

Block
  ::= "{" { Stat:stats } "}" as BlockStat
  ;

If
  ::= ?(allow_half_if: "if" "cond" "then" Stat:thenBranch) as IfStat
  ::= "if" "cond" "then" !(!allow_half_if; Stat:thenBranch) "else" Stat:elseBranch as IfStat
  ;

Stat
  ::= !Do
  ::= !(allow_half_if; !Block)
  ::= !If
  ;

Module
  ::= Stat:stat as Module
  ;